## â‘  ì—¬ëŸ¬ë¶„ì˜ ì—…ë¬´ë‚˜ íšŒì‚¬ ìƒí™œì—ì„œ ê°œì„ ì´ í•„ìš”í–ˆë˜ ê²ƒì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?

ì „ìì¶”ì²¨ì„ ì´í•´í•˜ê³ , ìš©ì„œí•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.



## â‘¡ íŒŒì´ì¬ì„ í†µí•´ ì–´ë–»ê²Œ í•´ê²°í•˜ê³ ì í•˜ì˜€ë‚˜ìš”? (ì ‘ê·¼ë°©ë²•, ì½”ë”©ë°©ì‹ ë“±)

1. ì „ìì¶”ì²¨ ì´í•´
1. ë‹¹ì²¨ ìˆ«ì ì˜ˆì¸¡
1. ì‹œê°í™”



#### ë°ëª¨ : http://172.19.149.225:8501/

#### ì½”ë“œ : https://github.com/oiotoxt/UniformSumLottery



## â‘¢ ì´ì „ì— ë¹„í•´ ì–´ë–»ê²Œ ë˜ëŠ” ì–¼ë§ˆë‚˜ ê°œì„ ì´ ë˜ì—ˆë‚˜ìš”? (ì‹œê°„ë‹¨ì¶•, íŒŒê¸‰íš¨ê³¼ ë“±)

- **ì‹œê°„ë‹¨ì¶•** : í¬ê¸°ê°€ ë¹¨ë¼ì§‘ë‹ˆë‹¤.

- **íŒŒê¸‰íš¨ê³¼** : ì¼ì¼ì£¼ì°¨, íœ´ì–‘ì†Œ ë“±ì˜ ë‹¹ì²¨ ìˆ«ì ì˜ˆì¸¡ì€ ì¢…ì¢… ê·¼ë¡œ ê³„íšì— ë„ì›€ì´ ë©ë‹ˆë‹¤.



## â‘£ íŒŒì´ì¬ ì½”ë“œë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”ğŸ˜Š



*íŒŒì´ì¬ì„ ëª°ë¼ë„ ëˆ„êµ¬ë‚˜ ì‘ìš©í•˜ì‹¤ ìˆ˜ ìˆë„ë¡ ì›ë¦¬ ìœ„ì£¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤*



#### <27ì´ ë‚˜ì˜¬ í™•ë¥ >

ìˆ«ì 6ê°œì˜ í•©ì€ 0ë¶€í„° 54ê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì¦‰, 0ë¶€í„° 54ê¹Œì§€ ì“°ì—¬ ìˆëŠ” `55ë©´ì²´ ì£¼ì‚¬ìœ„`ë¥¼ ë˜ì§€ëŠ” ì…ˆì¸ë°ìš”.

ë³´í†µì˜ ì£¼ì‚¬ìœ„ë¼ë©´ ê° ìˆ«ìê°€ ë‚˜ì˜¬ í™•ë¥ ì´ `1/55`ë¡œ ë˜‘ê°™ê² ì§€ë§Œ, ì „ìì¶”ì²¨ì˜ ê²½ìš°ëŠ” ì¢€ ë‹¤ë¦…ë‹ˆë‹¤.



`000000`ë¶€í„° `999999`ê¹Œì§€, ì •í™•íˆ `ë°±ë§Œ ê°€ì§€ ì¡°í•©` ì¤‘,

`0`ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ëŠ” `000000` ë°–ì— ì—†ê³ ,

`54`ê°€ ë‚˜ì˜¤ëŠ” ê²½ìš°ëŠ” `999999` ë°–ì— ì—†ìœ¼ë‹ˆê¹Œìš”.

ë°˜ë©´ í•©ì´ `1`ì´ ë˜ëŠ” ê²½ìš°ëŠ” 6ê°€ì§€ë‚˜ ìˆìŠµë‹ˆë‹¤. ( `000001` `000010` `000100` `001000` `010000` `100000` )

í•©ì´ `53`ì¸ ê²½ìš°ë„ ë§ˆì°¬ê°€ì§€ê³ ìš”. ( `99999íŒ”` `9999íŒ”9` `999íŒ”99` `99íŒ”999` `9íŒ”9999` `íŒ”99999` )

ì´ëŸ° ì‹ì´ë¼ë©´ `54`ì˜ ì ˆë°˜ì¸ `27`ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ê°€ ê°€ì¥ ë§ì„ ê²ƒ ê°™ì€ë°ìš”.



í™•ì¸ì„ ìœ„í•´ ë‹¤ìŒ ì½”ë“œë¡œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ë”°ì ¸ ë´…ë‹ˆë‹¤.

```python
PDF = [0] * 55  # ê° ìˆ«ìí•©ì´ ë°œìƒí•œ íšŸìˆ˜ë¥¼ ì—¬ê¸°ì— ì €ì¥
for i0 in range(10):
    for i1 in range(10):
        for i2 in range(10):
            for i3 in range(10):
                for i4 in range(10):
                    for i5 in range(10):
                        PDF[i0 + i1 + i2 + i3 + i4 + i5] += 1

for idx in range(55):
    print(f'{idx:>2} ==> {PDF[idx]:>6,}')
```

```
# ê²°ê³¼

 0 ==>      1
 1 ==>      6
 2 ==>     21

26 ==> 54,747
27 ==> 55,252    <== ì£¼ëª©
28 ==> 54,747

52 ==>     21
53 ==>      6
54 ==>      1
```



í•©ì´ `27`ì¸ ê²½ìš°ê°€ `ë°±ë§Œ ê°€ì§€ ì¡°í•©` ì¤‘ 55,252ë²ˆ ë‚˜íƒ€ë‚˜ëŠ”êµ°ìš”.

ê·¸ë¦¼ìœ¼ë¡œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

![pdf](images/pdf.png)

ë§Œì•½ ë°±ë§Œ ëª…ì´ ì¶”ì²¨ì— ì°¸ì—¬í–ˆë‹¤ë©´ 55,252ëª…ì´ `27`ì„ ë½‘ê²Œ ë©ë‹ˆë‹¤.

ì¦‰ `27`ì„ ë°›ì„ í™•ë¥ ì€ `5.5%` ì…ë‹ˆë‹¤.



#### <27ë³´ë‹¤ ì‘ì€ ìˆ˜ê°€ ë‚˜ì˜¬ í™•ë¥ >

ê·¸ë ‡ë‹¤ë©´ `27`ë³´ë‹¤ ì‘ì€ ìˆ«ìê°€ ë‚˜ì˜¬ í™•ë¥ ì€ ì–¼ë§ˆì¼ê¹Œìš”?

ë‹¤ìŒì²˜ëŸ¼ ë¶€ì§€ëŸ°íˆ ë”í•´ë³´ëŠ” ë°©ë²•ì´ ìˆê² ëŠ”ë°ìš”.

`0ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ì˜ ìˆ˜` + `1ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ì˜ ìˆ˜` + `...` + `26ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ì˜ ìˆ˜`

ê²°ê³¼ëŠ” 472,374ëª…, ì¦‰ `47.2%`ê°€ ë©ë‹ˆë‹¤.



ì´ `ëˆ„ì  í™•ë¥ `ì„ ìì£¼ ì‚¬ìš©í•  ì˜ˆì •ì´ì–´ì„œ, ìˆ«ì ë³„  `ëˆ„ì  í™•ë¥ `ì„ ë¯¸ë¦¬-í•œë²ˆ-ëª½ì°½ ë½‘ì•„ ë‘¡ë‹ˆë‹¤.

```python
CDF = [0] * 55  # ê° ìˆ«ìí•©ì´ ë°œìƒí•œ íšŸìˆ˜ë¥¼ ëˆ„ì í•´ ê°€ë©° ì—¬ê¸°ì— ì €ì¥
for idx in range(55):
    CDF[idx] = CDF[idx-1] + PDF[idx]

for idx in range(55):
    print(f'{idx:>2} ==> {CDF[idx]:>9,}')
```

```
# ê²°ê³¼

 0 ==>         1
 1 ==>         7
 2 ==>        28

26 ==>   472,374    <== ì£¼ëª©
27 ==>   527,626
28 ==>   582,373

52 ==>   999,993
53 ==>   999,999
54 ==> 1,000,000
```



ê·¸ë¦¼ìœ¼ë¡œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

![cdf](images/cdf.png)



#### <ë‹¹ì²¨ ìˆ«ì ì˜ˆì¸¡>

ë§Œì•½ `[2 ëŒ€ 1]`ì˜ ê²½ìŸë¥ ì„ ëš«ì–´ì•¼ í•œë‹¤ë©´ `50%`ì˜ ê²½ìŸìë¥¼ ë¬¼ë¦¬ì³ì•¼ í•˜ë‹ˆê¹Œ, ìš°ë¦¬ê°€ ë„˜ì–´ì„œì•¼ í•˜ëŠ” ì´ `50%`ë¥¼ `ëª©í‘œ ë°±ë¶„ìœ„`ë¼ê³  ë¶€ë¥´ê² ìŠµë‹ˆë‹¤.

```
# ë¯¸ë¦¬ ê³„ì‚°í•´ ë‘ì—ˆë˜ <ëˆ„ì  í™•ë¥ > ì†Œí™˜

26 ==>   472,374 == ëŒ€ëµ 47%
27 ==>   527,626 == ëŒ€ëµ 53%
```

`27`ì„ ë½‘ì€ ì‚¬ëŒì€ ìœ„ ë‘ í™•ë¥  ì‚¬ì´(47% ~ 53%) ì–´ë”˜ê°€ë¥¼ ì°¨ì§€í•˜ê²Œ ë©ë‹ˆë‹¤. (ë™ë¥  ì²˜ë¦¬ ë°©ì‹ì— ë”°ë¼ ë‹¬ë¼ì§€ê² ì£ )

ì¦‰, ìš´ì´ ì¢‹ìœ¼ë©´ `ëª©í‘œ ë°±ë¶„ìœ„` `50%`ë¥¼ ë„˜ì„ ìˆ˜ë„ ìˆëŠ” ê´œì°®ì€ ìˆ«ìë¥¼ ë°›ì€ ì…ˆì…ë‹ˆë‹¤.



ì´ì²˜ëŸ¼ `ëª©í‘œ ë°±ë¶„ìœ„`ê°€ ìœ„ `ëˆ„ì  í™•ë¥ ` ê·¸ë˜í”„ì—ì„œ ì–´ëŠ êµ¬ê°„ì— í•´ë‹¹í•˜ëŠ”ì§€ ë”°ì ¸ ë³´ëŠ” ë°©ë²•ìœ¼ë¡œ ë‹¹ì²¨ ìˆ«ìë¥¼ ì˜ˆì¸¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



ì•„ë˜ ì½”ë“œëŠ” ê²½ìŸë¥ ì´ [17 ëŒ€ 1]ì¼ ë•Œì˜ ë‹¹ì²¨ ìˆ«ìë¥¼ ì˜ˆì¸¡í•©ë‹ˆë‹¤.

```python
rate = 17
print(f'ê²½ìŸë¥  [{rate} ëŒ€ 1]')

if rate < 1.0:
    rate = 1.0

percentile = 1.0 - (1.0 / rate)
print(f'ëª©í‘œ ë°±ë¶„ìœ„ : {percentile * 100.0}+')

percentile *= 1000000
predict = 0
for idx in range(55):
    if percentile <= CDF[idx]:
        predict = idx
        break

print(f'ë‹¹ì²¨ë˜ë ¤ë©´ ì•„ë§ˆë„ {predict} ì´ìƒì´ í•„ìš”í• ê±°ì—ìš”~')
```

```
# ê²°ê³¼

ê²½ìŸë¥  [17 ëŒ€ 1]
ëª©í‘œ ë°±ë¶„ìœ„ : 94.11764705882352+
ë‹¹ì²¨ë˜ë ¤ë©´ ì•„ë§ˆë„ 38 ì´ìƒì´ í•„ìš”í• ê±°ì—ìš”~
```



#### <ì‡¼íŠ¸ í”„ë¡œê·¸ë¨>

ê·¸ëŸ°ë° `í™•ë¥  ë¶„í¬`ëŠ” ëŠ˜ ë˜‘ê°™ìœ¼ë‹ˆê¹Œ (ì§€ê¸ˆê¹Œì§€ì˜ ì½”ë“œë“¤ì€ ëª¨ë‘ ì§€ìš°ê³ ) ë‹¤ìŒì²˜ëŸ¼ ì§§ê²Œ ì“¸ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

```python
CDF = [     1,       7,      28,      84,     210,     462,     924,
          1716,    3003,    5005,    8002,   12334,   18396,   26628,
         37500,   51492,   69069,   90651,  116578,  147070,  182197,
        221859,  265776,  313488,  364365,  417627,  472374,  527626,
        582373,  635635,  686512,  734224,  778141,  817803,  852930,
        883422,  909349,  930931,  948508,  962500,  973372,  981604,
        987666,  991998,  994995,  996997,  998284,  999076,  999538,
        999790,  999916,  999972,  999993,  999999, 1000000]


# ê²½ìŸë¥ ì´ [3.5 ëŒ€ 1] ì´ë©´ rate = 3.5
def predict(rate):
    if rate < 1.0:
        rate = 1.0
    percentile = (1.0 - (1.0 / rate)) * CDF[-1]
    for idx in range(len(CDF)):
        if percentile <= CDF[idx]:
            return idx
```



ê·¸ë¦¬ê³  ê°„ë‹¨ í…ŒìŠ¤íŠ¸.

```python
def _test():
    max_num = len(CDF) - 1  # 54

    import sys

    pred = predict(-sys.float_info.max)
    assert pred == 0

    pred = predict(0.0)
    assert pred == 0

    pred = predict(1.0)
    assert pred == 0

    pred = predict(2.0)
    assert pred == max_num * 0.5  # 27

    pred = predict(sys.float_info.max)
    assert pred == max_num


if __name__ == '__main__':
    _test()
```



#### <ì‹œê°í™”>

[ì˜† ë™ë„¤](https://github.com/sorrycc/awesome-javascript#data-visualization)ì²˜ëŸ¼ í™”ë ¤í•˜ì§„ ì•Šì§€ë§Œ, íŒŒì´ì¬ì—” ì¢€ ë” ë°ì´í„° ë¶„ì„ì— ìœ ë¦¬í•œ [ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬](https://github.com/vinta/awesome-python#data-visualization)ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

ì €ëŠ” [Dash](https://plotly.com/dash/)ë¥¼ ì„ íƒí–ˆê³ , ë°ëª¨ì— ì‚¬ìš©ëœ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```python
import numpy as np
import dash
import dash_core_components as dcc
import dash_html_components as html
import plotly.express as px
# import plotly.figure_factory as ff

import prob_welldone as prob


external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']

app = dash.Dash(__name__, external_stylesheets=external_stylesheets)


n = 10
# array_len, n_event, PDF, norm_PDF, max_PDF, CDF = prob.create_probability_table(n)
# fig_pdf = px.bar(PDF, x='ìˆ«ì í•©', y='ê²½ìš°ì˜ ìˆ˜')
# fig_pdf = px.bar(PDF)
fig_pdf = px.bar(prob.PDF)
fig_pdf.update_layout(
    xaxis=dict(tickmode='linear')
)

# fig_cdf = px.bar(CDF)
# fig_cdf.update_layout(
#     xaxis=dict(tickmode='linear')
# )

# group_labels = ['prob']
# hist_data = [norm_PDF]
# # fig2 = ff.create_distplot(hist_data, group_labels)
# fig_norm_pdf = px.line(norm_PDF)

# bar_x = [i for i in range(array_len)]
# bar_y = [0] * array_len
# bar_y[27] = max_PDF
# fig_norm_pdf.add_bar(x=bar_x, y=bar_y)

app.layout = html.Div(children=[
    html.Center([
        html.H1(children='ë‹¹ì²¨ ìˆ«ì ì˜ˆì¸¡',
                style={'margin-top': '40px', 'margin-bottom': '60px'}
                ),

        html.Div(children='ê²½ìŸë¥ ì„ ì…ë ¥í•˜ì„¸ìš”.'),

        dcc.Input(
            id='competition ratio',
            type='number',
            placeholder='2.0',
            min=0,
            step=0.05,
            style={'margin-bottom': '40px'}
        ),

        html.Div(id='output-container1'),

        dcc.Slider(
            id='my-slider',
            min=0,
            max=10,
            step=0.05,
            tooltip={'always_visible': True},
            marks={
                0: '0.0',
                10: '10.0'
            },
            value=2.0,
        ),

        html.Div(id='output-container2'),

        dcc.Graph(
            id='graph pdf',
            figure=fig_pdf
        ),

        # dcc.Graph(
        #     id='graph cdf',
        #     figure=fig_cdf
        # ),

        # dcc.Graph(
        #     id='example-graph',
        #     figure=fig_norm_pdf
        # )

        html.Div(id='out-all-types')
    ])
])


# @app.callback(
#     dash.dependencies.Output('my-slider', 'value'),
#     [dash.dependencies.Input('competition ratio', 'value')])
# def update_output_input(value):
#     return value


@app.callback(
    dash.dependencies.Output('competition ratio', 'value'),
    [dash.dependencies.Input('my-slider', 'value')])
def update_output_slider(value):
    return value

@app.callback(
    dash.dependencies.Output('output-container2', 'children'),
    [dash.dependencies.Input('my-slider', 'value')])
def update_output_slider_guess(value):
    pred = prob.predict(value)
    return f'ë‹¹ì²¨ë˜ë ¤ë©´ ì•„ë§ˆë„ {pred} ì´ìƒì´ í•„ìš”í• ê±°ì—ìš”~'


if __name__ == '__main__':
    app.run_server(host='0.0.0.0', port=8501, debug=True)


# pip install dash==1.16.3 plotly pandas scipy
# http://127.0.0.1:8050/
# http://meta.nctts.net:8050/
```



#### <ì°¸ê³ >

ì „ìì¶”ì²¨ì˜ í™•ë¥  ë¶„í¬ëŠ” [ì •ê·œ ë¶„í¬](https://en.wikipedia.org/wiki/Normal_distribution)ê°€ ì•„ë‹ˆë¼ [Irwinâ€“Hall ë¶„í¬](https://en.wikipedia.org/wiki/Irwin%E2%80%93Hall_distribution)ì…ë‹ˆë‹¤.



## â‘¤ íŒŒì´ì¬ì„ ê³µë¶€í•˜ê³  ìˆëŠ” ì‚¬ìš°ë“¤ì—ê²Œ Tipì„ ì£¼ê³  ì‹¶ì€ ê²ƒì´ ìˆë‹¤ë©´ìš”?

ë°”ë¡œ ì¨ë¨¹ê¸° ì¢‹ì€ ì–¸ì–´ëŠ” ë‚´ë¶€ ì‘ë™ ì›ë¦¬ë¥¼ ì´í•´í•˜ê¸°ê°€ ì˜¤íˆë ¤ ì–´ë µìŠµë‹ˆë‹¤.

íŒŒì´ì¬ì´ë‚˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ê·¸ëŸ¬í•œë°ìš”.

ë¶€ë‹´ ê°–ì§€ ë§ê³  ì‹¤ìš©ì ì¸ ê´€ì ì—ì„œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì´ëŸ° ì–¸ì–´ë“¤ì˜ ì¥ì ì„ ì˜ í™œìš©í•˜ëŠ” ë°©ë²•ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

ëª¨ë‹ˆí„°ì— ëŠ˜ `ì°½` í•˜ë‚˜ ì¼œ ë‘ê³ , ê³„ì‚°ê¸° ëŒ€ìš©ìœ¼ë¡œ ì‚¬ìš©í•´ ë³´ì‹œëŠ” ê²ƒë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì–´ë–¤ `ì°½`ì„ ì¼œ ë‘ëŠ” ê²Œ ì¢‹ì„ê¹Œ ìƒê°í•´ë³´ë©´,

- [IPython](https://ipython.org/)ì„ ì‹¤í–‰í•œ í„°ë¯¸ë„(ë„ìŠ¤ì°½)
- [ì¥¬í”¼í„° ë…¸íŠ¸ë¶](https://jupyter.org/) ( [Colab](https://colab.research.google.com/)ì²˜ëŸ¼ ì˜¨ë¼ì¸ ë¬´ë£Œ ì„œë¹„ìŠ¤ë„ ë§ìŠµë‹ˆë‹¤ )
- [ë¹„ì¥¬ì–¼ ìŠ¤íŠœë””ì˜¤ ì½”ë“œ](https://code.visualstudio.com/) + [íŒŒì´ì¬ í™•ì¥](https://marketplace.visualstudio.com/items?itemName=ms-python.python)

..ë“±ì´ ë¨¼ì € ë– ì˜¤ë¦…ë‹ˆë‹¤.



ë§Œì•½ ê²Œì„í”„ë¡œê·¸ë˜ë¨¸ë¼ë©´ ì´ëŸ° ì½”ë“œì— í¥ë¯¸ë¥¼ ëŠë¼ì‹¤ì§€ë„ ëª¨ë¥´ê² ë„¤ìš”.

- [ëª‡ ë°± ì¤„ë¡œ ë§Œë“  ë§ˆì¸í¬ë˜í”„íŠ¸](https://github.com/fogleman/Minecraft)



ì‚¬ì‹¤.. ê¼­ íŒŒì´ì¬ì„ ê³ ì§‘í•  ì´ìœ ë„ ì—†ìŠµë‹ˆë‹¤.

ì–¸ì  ê°€ Webì´ë‚˜ Appì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸(Node, React)ê°€ ë” ë‚˜ì€ ì„ íƒì§€ì…ë‹ˆë‹¤.

ì¹˜í‚¨ì§‘ì„ ì—´ê³  ì›¹ë„ ë§Œë“ ë‹¤ê±°ë‚˜..

ì¹˜í‚¨ì§‘ì€ ë‹«ê³  ì•±ë§Œ ë§Œë“ ë‹¤ê±°ë‚˜..



ë§ˆì§€ë§‰ìœ¼ë¡œ ëˆˆìš”ê¸°ìš©(?) ë§í¬ í•˜ë‚˜ ë‚¨ê¹ë‹ˆë‹¤.

- [ê¹ë†€ íŒŒì´ì¬](https://github.com/vinta/awesome-python)

